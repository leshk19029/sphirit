local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/UI-Libs/main/Vape.txt"))()

local window = library:Window("Player Controller", Color3.fromRGB(44, 120, 224), Enum.KeyCode.RightControl)
local mainTab = window:Tab("Main")

local controlledPlayer = nil
local isControlling = false
local originalCFrame = nil

-- Speed Boost variables
local speedEnabled = false
local currentSpeed = 25
local velocityConnection = nil

local function controlPlayer(player)
    if controlledPlayer and controlledPlayer.Character and controlledPlayer.Character:FindFirstChild("HumanoidRootPart") then
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = originalCFrame
    end
    
    if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        originalCFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = player.Character.HumanoidRootPart.CFrame
        controlledPlayer = player
        isControlling = true
        return true
    end
    return false
end

local function stopControl()
    if controlledPlayer and originalCFrame then
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = originalCFrame
        controlledPlayer = nil
        isControlling = false
        originalCFrame = nil
    end
end

-- Speed Boost function
local function applyVelocity()
    if not speedEnabled then return end
    
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChild("Humanoid")
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    
    if humanoid and rootPart then
        local moveDirection = humanoid.MoveDirection
        if moveDirection.Magnitude > 0 then
            local velocity = moveDirection * currentSpeed
            rootPart.Velocity = Vector3.new(velocity.X, rootPart.Velocity.Y, velocity.Z)
        else
            rootPart.Velocity = Vector3.new(0, rootPart.Velocity.Y, 0)
        end
    end
end

local function toggleSpeedBoost(state)
    speedEnabled = state
    
    if speedEnabled then
        if velocityConnection then
            velocityConnection:Disconnect()
        end
        velocityConnection = game:GetService("RunService").RenderStepped:Connect(applyVelocity)
    else
        if velocityConnection then
            velocityConnection:Disconnect()
            velocityConnection = nil
        end
    end
end

local playerList = {}
for _, player in pairs(game.Players:GetPlayers()) do
    if player ~= game.Players.LocalPlayer then
        table.insert(playerList, player.Name)
    end
end

mainTab:Toggle("Control Player", false, function(state)
    if state then
        window:Notification("Control Player", "Select a player to control from the dropdown list", "Okay")
    else
        stopControl()
    end
end)

mainTab:Dropdown("Select Player", playerList, function(selectedPlayerName)
    if isControlling then
        local player = game.Players:FindFirstChild(selectedPlayerName)
        if player then
            controlPlayer(player)
        end
    end
end)

-- Добавляем переключатель и слайдер для Speed Boost
mainTab:Toggle("Speed Boost", false, function(state)
    toggleSpeedBoost(state)
end)

mainTab:Slider("Speed Value", 1, 100, 25, function(value)
    currentSpeed = value
end)
