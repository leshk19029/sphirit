local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/UI-Libs/main/Vape.txt"))()

local window = library:Window("Player Controller", Color3.fromRGB(44, 120, 224), Enum.KeyCode.RightControl)
local mainTab = window:Tab("Main")
local espTab = window:Tab("ESP")

-- Функция для загрузки модулей с GitHub
local function loadModule(url)
    local success, result = pcall(function()
        return loadstring(game:HttpGet(url))()
    end)
    if success then
        return result
    else
        warn("Failed to load module from: " .. url)
        return nil
    end
end

-- Загружаем все модули с GitHub
local SpeedBoostModule = loadModule("https://raw.githubusercontent.com/your-username/your-repo/main/speed_boost.lua")
local AntiEffectsModule = loadModule("https://raw.githubusercontent.com/your-username/your-repo/main/anti_effects.lua")
local ESPModule = loadModule("https://raw.githubusercontent.com/your-username/your-repo/main/esp_module.lua")

-- Переменные для управления функциями
local speedEnabled = false
local antiEffectsEnabled = false
local espEnabled = false

-- Speed Boost
if SpeedBoostModule then
    mainTab:Toggle("Speed Boost", false, function(state)
        speedEnabled = state
        if SpeedBoostModule.toggleSpeedBoost then
            SpeedBoostModule.toggleSpeedBoost(state)
        end
    end)

    mainTab:Slider("Speed Value", 1, 45, 25, function(value)
        if SpeedBoostModule.setSpeed then
            SpeedBoostModule.setSpeed(value)
        end
    end)
else
    warn("Speed Boost module not loaded")
end

-- Anti Effects
if AntiEffectsModule then
    mainTab:Toggle("Anti Effects", false, function(state)
        antiEffectsEnabled = state
        if AntiEffectsModule.toggleAntiEffects then
            AntiEffectsModule.toggleAntiEffects(state)
        end
    end)
else
    warn("Anti Effects module not loaded")
end

-- ESP System
if ESPModule then
    -- Основной переключатель ESP
    espTab:Toggle("Enable ESP", false, function(state)
        espEnabled = state
        if ESPModule.ToggleAll then
            ESPModule.ToggleAll(state)
        end
    end)

    -- Timer ESP
    espTab:Toggle("Timer ESP", true, function(state)
        if ESPModule then
            ESPModule.TimerESP.Enabled = state
            if state and ESPModule.InitializeTimerESP then
                ESPModule.InitializeTimerESP()
            end
        end
    end)

    -- Name Tags
    espTab:Toggle("Name Tags", true, function(state)
        if ESPModule then
            ESPModule.NameTags.Enabled = state
            if state and ESPModule.ToggleNameTags then
                ESPModule.ToggleNameTags(true)
            elseif not state and ESPModule.ToggleNameTags then
                ESPModule.ToggleNameTags(false)
            end
        end
    end)

    -- Wall Hack
    espTab:Toggle("Wall Hack", true, function(state)
        if ESPModule then
            ESPModule.WallHack.Enabled = state
            if state and ESPModule.ToggleWallHack then
                ESPModule.ToggleWallHack(true)
            elseif not state and ESPModule.ToggleWallHack then
                ESPModule.ToggleWallHack(false)
            end
        end
    end)

    -- Pet Display
    espTab:Toggle("Pet Display", true, function(state)
        if ESPModule then
            ESPModule.PetDisplay.Enabled = state
            if state and ESPModule.TogglePetDisplay then
                ESPModule.TogglePetDisplay(true)
            elseif not state and ESPModule.TogglePetDisplay then
                ESPModule.TogglePetDisplay(false)
            end
        end
    end)

    -- Настройки Wall Hack
    espTab:Button("Wall Hack Settings", function()
        if ESPModule.WallHack then
            local fillColor = ESPModule.WallHack.FillColor
            local outlineColor = ESPModule.WallHack.OutlineColor
            
            window:Notification("Wall Hack Settings", 
                string.format("Fill Color: RGB(%d, %d, %d)\nOutline Color: RGB(%d, %d, %d)", 
                    math.floor(fillColor.R * 255), 
                    math.floor(fillColor.G * 255), 
                    math.floor(fillColor.B * 255),
                    math.floor(outlineColor.R * 255),
                    math.floor(outlineColor.G * 255),
                    math.floor(outlineColor.B * 255)
                ), 
                "Okay")
        end
    end)

else
    warn("ESP module not loaded")
end

-- Уведомление о успешной загрузке
task.spawn(function()
    wait(1)
    local loadedModules = 0
    if SpeedBoostModule then loadedModules = loadedModules + 1 end
    if AntiEffectsModule then loadedModules = loadedModules + 1 end
    if ESPModule then loadedModules = loadedModules + 1 end
    
    if loadedModules == 3 then
        window:Notification("Modules Loaded", "Successfully loaded all modules from GitHub", "Okay")
    else
        window:Notification("Modules Loaded", "Loaded "..loadedModules.."/3 modules from GitHub", "Okay")
    end
end)
