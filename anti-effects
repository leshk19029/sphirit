local lighting = game:GetService("Lighting")
local camera = game:GetService("Workspace").CurrentCamera

-- Функция для удаления всех нежелательных эффектов
local function removeUnwantedEffects()
    -- Список эффектов для удаления (оба типа цветокоррекции)
    local effectsToRemove = {
        "DiscoEffect", "BeeBlur", "Blur", "SunRaysEffect", 
        "BloomEffect", "DepthOfFieldEffect", "ColorCorrection", "ColorCCorrection"
    }
    
    -- Удаляем все нежелательные эффекты
    for _, effectName in ipairs(effectsToRemove) do
        local effect = lighting:FindFirstChild(effectName)
        if effect then
            effect:Destroy()
        end
    end
    
    -- Фиксируем FieldOfView
    if camera then
        camera.FieldOfView = 70
    end
end

-- Функция для проверки новых эффектов
local function checkForNewEffects(child)
    local effectsToRemove = {
        "DiscoEffect", "BeeBlur", "Blur", "SunRaysEffect",
        "BloomEffect", "DepthOfFieldEffect", "ColorCorrection", "ColorCCorrection"
    }
    
    for _, effectName in ipairs(effectsToRemove) do
        if child.Name == effectName then
            child:Destroy()
            
            -- Дополнительно фиксируем FOV при обнаружении DiscoEffect
            if child.Name == "DiscoEffect" and camera then
                camera.FieldOfView = 70
            end
            break
        end
    end
end

-- Функция для мониторинга изменения FOV
local function monitorFOV()
    if not camera then return end
    
    -- Устанавливаем начальное значение
    camera.FieldOfView = 70
    
    -- Отслеживаем изменения FOV
    camera:GetPropertyChangedSignal("FieldOfView"):Connect(function()
        if camera.FieldOfView ~= 70 then
            camera.FieldOfView = 70
        end
    end)
end

-- Первоначальная очистка
removeUnwantedEffects()
monitorFOV()

-- Отслеживаем новые эффекты
lighting.ChildAdded:Connect(checkForNewEffects)

-- Постоянный мониторинг (на случай если ChildAdded не сработает)
local heartbeatConnection
heartbeatConnection = game:GetService("RunService").Heartbeat:Connect(function()
    removeUnwantedEffects()
    
    -- Дополнительная проверка FOV
    if camera and camera.FieldOfView ~= 70 then
        camera.FieldOfView = 70
    end
end)

-- Очистка при выходе
game:GetService("Players").LocalPlayer.CharacterRemoving:Connect(function()
    if heartbeatConnection then
        heartbeatConnection:Disconnect()
    end
end)
