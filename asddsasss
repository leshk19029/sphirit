-- ============ SMART SERVER HOP (5-6 PLAYERS) WITH SERVER HISTORY ============
local serverHistory = {}
local MAX_HISTORY = 10

local function autoServerHop()
    local placeId = game.PlaceId
    setCenterText("üîç –ü–æ–∏—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Å 5-6 –∏–≥—Ä–æ–∫–∞–º–∏...", Color3.fromRGB(200, 200, 50))
    
    -- –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤
    local success, result = pcall(function()
        local response = game:HttpGet("https://games.roblox.com/v1/games/" .. placeId .. "/servers/Public?limit=100", true)
        return HttpService:JSONDecode(response)
    end)
    
    if not success or not result or not result.data then
        setCenterText("‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤", Color3.fromRGB(255, 100, 100))
        task.wait(2)
        setCenterText("üîÑ –ò—Å–ø–æ–ª—å–∑—É—é —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ç–æ–¥...", Color3.fromRGB(255, 200, 100))
        TeleportService:Teleport(placeId)
        return
    end
    
    local suitableServers = {}
    local currentJobId = game.JobId
    
    -- –ò—â–µ–º —Å–µ—Ä–≤–µ—Ä—ã —Å 5-6 –∏–≥—Ä–æ–∫–∞–º–∏, –∏—Å–∫–ª—é—á–∞—è —Ç–µ–∫—É—â–∏–π –∏ –Ω–µ–¥–∞–≤–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä—ã
    for _, server in ipairs(result.data) do
        if server and server.playing and server.playing >= 5 and server.playing <= 6 and server.id ~= currentJobId then
            local isRecent = false
            for _, recentId in ipairs(serverHistory) do
                if server.id == recentId then
                    isRecent = true
                    break
                end
            end
            
            if not isRecent then
                table.insert(suitableServers, server)
            end
        end
    end
    
    -- –ï—Å–ª–∏ –Ω–∞—à–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Å–µ—Ä–≤–µ—Ä—ã
    if #suitableServers > 0 then
        local randomServer = suitableServers[math.random(1, #suitableServers)]
        
        -- –î–æ–±–∞–≤–ª—è–µ–º —Å–µ—Ä–≤–µ—Ä –≤ –∏—Å—Ç–æ—Ä–∏—é
        table.insert(serverHistory, randomServer.id)
        if #serverHistory > MAX_HISTORY then
            table.remove(serverHistory, 1)
        end
        
        setCenterText("üéØ –ù–∞–π–¥–µ–Ω —Å–µ—Ä–≤–µ—Ä —Å " .. randomServer.playing .. " –∏–≥—Ä–æ–∫–∞–º–∏", Color3.fromRGB(100, 255, 100))
        task.wait(1)
        setCenterText("üöÄ –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è...", Color3.fromRGB(255, 255, 100))
        TeleportService:TeleportToPlaceInstance(placeId, randomServer.id)
        return
    end
    
    -- –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å 5-6 –∏–≥—Ä–æ–∫–∞–º–∏ –Ω–µ—Ç, –∏—â–µ–º —Å 4-7 (—Ç–∞–∫–∂–µ –∏—Å–∫–ª—é—á–∞—è —Ç–µ–∫—É—â–∏–π –∏ –Ω–µ–¥–∞–≤–Ω–∏–µ)
    for _, server in ipairs(result.data) do
        if server and server.playing and server.playing >= 4 and server.playing <= 7 and server.id ~= currentJobId then
            local isRecent = false
            for _, recentId in ipairs(serverHistory) do
                if server.id == recentId then
                    isRecent = true
                    break
                end
            end
            
            if not isRecent then
                table.insert(suitableServers, server)
            end
        end
    end
    
    if #suitableServers > 0 then
        local randomServer = suitableServers[math.random(1, #suitableServers)]
        
        -- –î–æ–±–∞–≤–ª—è–µ–º —Å–µ—Ä–≤–µ—Ä –≤ –∏—Å—Ç–æ—Ä–∏—é
        table.insert(serverHistory, randomServer.id)
        if #serverHistory > MAX_HISTORY then
            table.remove(serverHistory, 1)
        end
        
        setCenterText("üéØ –ù–∞–π–¥–µ–Ω —Å–µ—Ä–≤–µ—Ä —Å " .. randomServer.playing .. " –∏–≥—Ä–æ–∫–∞–º–∏", Color3.fromRGB(150, 255, 150))
        task.wait(1)
        setCenterText("üöÄ –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è...", Color3.fromRGB(255, 255, 100))
        TeleportService:TeleportToPlaceInstance(placeId, randomServer.id)
        return
    end
    
    -- –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞—à–ª–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω—É—é —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—é —Å –æ—á–∏—Å—Ç–∫–æ–π –∏—Å—Ç–æ—Ä–∏–∏
    serverHistory = {}
    setCenterText("‚ö†Ô∏è –ü–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ", Color3.fromRGB(255, 100, 100))
    task.wait(2)
    setCenterText("üîÑ –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É—é –Ω–∞ —Å–ª—É—á–∞–π–Ω—ã–π —Å–µ—Ä–≤–µ—Ä...", Color3.fromRGB(255, 200, 100))
    TeleportService:Teleport(placeId)
end
